@page "/comic/add"
@page "/comic/edit/{ComicId:int?}"
@using TrackerWasm.Components.ComicComponents

<PageTitle>@(ComicId == null ? "Add Comic" : "Edit Comic")</PageTitle>

<h1>@(ComicId == null ? "Add Comic" : "Edit Comic")</h1>

<EditForm Model="@comic" OnValidSubmit="HandleValidSubmit" FormName="webtoon-form">
    <DataAnnotationsValidator />

    <div class="vstack gap-3">
        <div class="form-group">
            <label for="Title">Title</label>
            <InputText id="Title" autocomplete="off" @bind-Value="comic.Title" class="form-control" />
            <ValidationMessage For="@(()=>comic.Title)" />
        </div>

        <ComicTypeDropdown @bind-Value="comic.ComicTypeId"/>

        <PublishingStatusDropdown @bind-Value="comic.PublishingStatusId"/>

        <ReadStatusDropdown @bind-Value="comic.ReadStatusId"/>

        <div class="form-group">
            <label for="ChapterRead">Chapter Read</label>
            <InputNumber id="ChapterRead" autocomplete="off" @bind-Value="comic.ChapterRead" class="form-control" />
            <ValidationMessage For="@(()=>comic.ChapterRead)" />
        </div>

        <div class="form-group">
            <label for="TotalChapter">Total Chapters</label>
            <InputNumber id="TotalChapter" autocomplete="off" @bind-Value="comic.TotalChapter" class="form-control" />
            <ValidationMessage For="@(()=>comic.TotalChapter)" />
        </div>

        <div class="mt-3 hstack gap-3">
            @if (ComicId != null)
            {
                <Button Color="ButtonColor.Danger" @onclick="ShowConfirmationAsync">Delete</Button>
                <div class="vr ms-auto"></div>
            }
            else
            {
                <div class="ms-auto"></div>
            }
            <Button Color="ButtonColor.Secondary" @onclick="NavigateBack">Back</Button>
            <Button Color="ButtonColor.Primary" Type="ButtonType.Submit">Save</Button>

        </div>
    </div>
</EditForm>

<ConfirmDialog @ref="deleteDialog" />