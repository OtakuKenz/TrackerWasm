@page "/comic/import"

<PageTitle>Import Comics</PageTitle>

<h1>Import Comics</h1>

<InputFile OnChange="HandleFileSelected" />
@if (jsonProperties.Count > 0)
{
    <h5 class="mt-4">Map JSON Properties</h5>
    <EditForm Model="jsonMapping" FormName="jsonMapping" OnValidSubmit="ProcessJson">
        <DataAnnotationsValidator />
        <div class="vstack gap-3">
            <div class="form-group">
                <label>Title</label>
                <InputSelect class="form-select" @bind-Value="jsonMapping.Title">
                    <option value="">-- Select JSON Field--</option>
                    @foreach (var jsonProperty in jsonProperties)
                    {
                        <option value="@jsonProperty">@jsonProperty</option>
                    }
                </InputSelect>
                <ValidationMessage For="@(()=>jsonMapping.Title)" />
            </div>
            <div class="form-group">
                <label>Comics Type</label>
                <InputSelect class="form-select" @bind-Value="jsonMapping.ComicType">
                    <option value="">-- Select JSON Field--</option>
                    @foreach (var jsonProperty in jsonProperties)
                    {
                        <option value="@jsonProperty">@jsonProperty</option>
                    }
                </InputSelect>
            </div>

            <div class="form-group">
                <label>Publishing Status</label>
                <InputSelect class="form-select" @bind-Value="jsonMapping.PublishingStatus">
                    <option value="">-- Select JSON Field--</option>
                    @foreach (var jsonProperty in jsonProperties)
                    {
                        <option value="@jsonProperty">@jsonProperty</option>
                    }
                </InputSelect>
            </div>

            <div class="form-group">
                <label>Read Status</label>
                <InputSelect class="form-select" @bind-Value="jsonMapping.ReadStatus">
                    <option value="">-- Select JSON Field--</option>
                    @foreach (var jsonProperty in jsonProperties)
                    {
                        <option value="@jsonProperty">@jsonProperty</option>
                    }
                </InputSelect>
            </div>

            <div class="form-group">
                <label>Chapter Read</label>
                <InputSelect class="form-select" @bind-Value="jsonMapping.ChapterRead">
                    <option value="">-- Select JSON Field--</option>
                    @foreach (var jsonProperty in jsonProperties)
                    {
                        <option value="@jsonProperty">@jsonProperty</option>
                    }
                </InputSelect>
            </div>

            <div class="form-group">
                <label>Total Chapter</label>
                <InputSelect class="form-select" @bind-Value="jsonMapping.TotalChapter">
                    <option value="">-- Select JSON Field--</option>
                    @foreach (var jsonProperty in jsonProperties)
                    {
                        <option value="@jsonProperty">@jsonProperty</option>
                    }
                </InputSelect>
            </div>
        </div>
        <Button Color="ButtonColor.Primary" class="mt-3" Type="ButtonType.Submit">Process and Save</Button>
    </EditForm>
}